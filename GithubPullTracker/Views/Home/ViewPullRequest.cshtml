@model GithubPullTracker.Models.PullFileList
@{
    ViewBag.FullWidth = true;

}
@section header
{ 
        <div class="title-bar">
            <h1><i class="icon icon-repo" ></i><a class="owner" href="~/@Model.RepositoryOwner">@Model.RepositoryOwner</a> / <a class="repo" href="~/@Model.RepositoryOwner/@Model.RepositoryName">@Model.RepositoryName</a></h1>

            <h2>@Model.Title <span>#@Model.Number</span></h2>
        </div>
}
<div id="splitter">
    <div class="left-splitter">
        <div id="tree">

        </div>
    </div>
    <div class="right-splitter">
        <div  id="home">
            <div class="main-comment" id="description">
                <a href="#" class="user">
                    <img src="@(Model.Creater.avatarUrl)&s=40" class="avatar" />
                </a>
                <div class="comment">
                    <div class="header">
                        <a href="~/@Model.Creater.login">@Model.Creater.login</a> commented <span class="timeago">@Model.CreatedAt</span>                        
                    </div>
                    @if (string.IsNullOrWhiteSpace(Model.Details))
                    {
                        <em>No description provided.</em>
                    }
                    else
                    {
                        <span class="apply-md">@Model.Details</span>
                    }
                </div>
            </div>

        </div>
        <div id="loader">
            loading ...
            </div>
            <div id="file_diff">
                <div class="header">
                    <span id="fileName"></span>
                    <label><input type="checkbox" id="show-inline-comments" checked />show inline comments</label>
                </div>
                <div class="editor"></div>
            </div>
        </div>
</div>

<script type="x-template" id="home-comment-template">
    @Html.Partial("_MainCommentTemplate")
</script>
<script type="x-template" id="home-file-comment-template">
    @Html.Partial("_MainFileCommentTemplate")
</script>
<script type="x-template" id="inline-file-comment-template">
    @Html.Partial("_InlineFileCommentTemplate")
</script>



@section scripts{
    <style id="mergeHeight">
        .CodeMirror-merge {
            height: auto;
        }
    </style>
    <script>


        

        diffViewScript('@Model.CurrentFile', '@Model.HeadSha', '@Url.Action("ViewPullRequest")', @Html.Raw(Model.TreeData.ToString()))

    </script>
}